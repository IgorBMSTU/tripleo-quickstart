.. _feature-configuration:

Feature Configuration
=====================

One can configure the Openstack features installed on either the undercloud
or overcloud by placing variable definitions in a YAML file and passing that
to quickstart using the ``-c`` command line option, like this::

    quickstart.sh -c config/general_config/featureset001.yml

Each feature set can also deploy a customized list of Openstack services. These
services are defined by the tripleo-heat-templates used for the overcloud deployment.
A definition of the services can be found
`here <https://github.com/openstack/tripleo-heat-templates/blob/master/README.rst#service-testing-matrix>`_

Below is a table with various features listed in each row and the features enabled
in each feature set configuration file in each column. When adding new configurations
please consult the following `etherpad <https://etherpad.openstack.org/p/quickstart-featuresets>`_

+-----+--------+------+---------+---------+---------+-------+-------+---------+---------+---------+---------+---------+----------+---------+---------+-----------+-------------+------+---------+-------+-------+-------+-------+-------+-------+-------+-------+-------+--------+------+----+----+-------+
|  FS | cnf-dl | ipv6 | SSL UC  | SSL Int | SSL Ext | NI SN | NI MN | NI BOND | introsp | UC idem | cont UC | cont OC |  OC upg  |  UC upg |  OC upd | FF OC upg | validations | ping | tempest | sc000 | sc001 | sc002 | sc003 | sc004 | sc005 | sc006 | sc007 | sc008 |nonha   | ceph | PM | HC | IPSec |
+=====+========+======+=========+=========+=========+=======+=======+=========+=========+=========+=========+=========+==========+=========+=========+===========+=============+======+=========+=======+=======+=======+=======+=======+=======+=======+=======+=======+========+======+====+====+=======+
| 001 |   X    |      |         | X       | X       |       | X     |         | X       |         |         |         |          |         |         |           |             |      | X       |       |       |       |       |       |       |       |       |       |        |      |    |    |       |
+-----+--------+------+---------+---------+---------+-------+-------+---------+---------+---------+---------+---------+----------+---------+---------+-----------+-------------+------+---------+-------+-------+-------+-------+-------+-------+-------+-------+-------+--------+------+----+----+-------+
| 002 |        |      |         | X       | X       |       | X     |         | X       |         |         |         |          |         |         |           |             | X    |         |       |       |       |       |       |       |       |       |       |        |      |    |    |       |
+-----+--------+------+---------+---------+---------+-------+-------+---------+---------+---------+---------+---------+----------+---------+---------+-----------+-------------+------+---------+-------+-------+-------+-------+-------+-------+-------+-------+-------+--------+------+----+----+-------+
| 003 |        |      |         |         |         |       |       |         |         | X       |         |         |          |         |         |           |             |      |         |       |       |       |       |       |       |       |       |       |        |      |    |    |       |
+-----+--------+------+---------+---------+---------+-------+-------+---------+---------+---------+---------+---------+----------+---------+---------+-----------+-------------+------+---------+-------+-------+-------+-------+-------+-------+-------+-------+-------+--------+------+----+----+-------+
| 004 |        |      |         |         |         |       |       |         |         |         |         |         |          |         |         |           | X           |      |         |       |       |       |       |       |       |       |       |       | X      |      |    |    |       |
+-----+--------+------+---------+---------+---------+-------+-------+---------+---------+---------+---------+---------+----------+---------+---------+-----------+-------------+------+---------+-------+-------+-------+-------+-------+-------+-------+-------+-------+--------+------+----+----+-------+
| 005 |        |      |         |         |         |       |       |         |         |         |         |         |          |         |         |           | X           | X    |         |       | X     |       |       |       |       |       |       |       |        |      | X  |    |       |
+-----+--------+------+---------+---------+---------+-------+-------+---------+---------+---------+---------+---------+----------+---------+---------+-----------+-------------+------+---------+-------+-------+-------+-------+-------+-------+-------+-------+-------+--------+------+----+----+-------+
| 006 |        |      |         |         |         |       |       |         |         |         |         |         |          |         |         |           | X           |      | X       |       |       | X     |       |       |       |       |       |       |        |      | X  |    |       |
+-----+--------+------+---------+---------+---------+-------+-------+---------+---------+---------+---------+---------+----------+---------+---------+-----------+-------------+------+---------+-------+-------+-------+-------+-------+-------+-------+-------+-------+--------+------+----+----+-------+
| 007 |        |      |         |         |         |       |       |         |         |         |         |         |          |         |         |           | X           |      | X       |       |       |       | X     |       |       |       |       |       |        |      | X  |    |       |
+-----+--------+------+---------+---------+---------+-------+-------+---------+---------+---------+---------+---------+----------+---------+---------+-----------+-------------+------+---------+-------+-------+-------+-------+-------+-------+-------+-------+-------+--------+------+----+----+-------+
| 008 |        |      |         |         |         |       |       |         |         |         |         |         |          |         |         |           | X           |      | X       |       |       |       |       | X     |       |       |       |       |        |      | X  |    |       |
+-----+--------+------+---------+---------+---------+-------+-------+---------+---------+---------+---------+---------+----------+---------+---------+-----------+-------------+------+---------+-------+-------+-------+-------+-------+-------+-------+-------+-------+--------+------+----+----+-------+
| 009 |        |      |         |         |         |       |       |         |         |         |         |         |          |         |         |           |             | X    |         |       |       |       |       |       | X     |       |       |       |        |      | X  |    |       |
+-----+--------+------+---------+---------+---------+-------+-------+---------+---------+---------+---------+---------+----------+---------+---------+-----------+-------------+------+---------+-------+-------+-------+-------+-------+-------+-------+-------+-------+--------+------+----+----+-------+
| 010 |   X    |      |         |         |         |       |       |         |         |         |         | X       |          |         |         |           |             |      | X       |       |       |       |       |       |       |       |       |       | X      |      |    |    |       |
+-----+--------+------+---------+---------+---------+-------+-------+---------+---------+---------+---------+---------+----------+---------+---------+-----------+-------------+------+---------+-------+-------+-------+-------+-------+-------+-------+-------+-------+--------+------+----+----+-------+
| 011 |        |      |         |         |         |       |       |         |         |         |         |         | X        |         |         |           |             | X    |         |       |       |       |       |       |       |       |       |       | X      |      |    |    |       |
+-----+--------+------+---------+---------+---------+-------+-------+---------+---------+---------+---------+---------+----------+---------+---------+-----------+-------------+------+---------+-------+-------+-------+-------+-------+-------+-------+-------+-------+--------+------+----+----+-------+
| 012 |        |      |         |         |         |       |       |         |         |         |         |         | X        |         |         |           |             | X    |         |       | X     |       |       |       |       |       |       |       | X      |      | X  |    |       |
+-----+--------+------+---------+---------+---------+-------+-------+---------+---------+---------+---------+---------+----------+---------+---------+-----------+-------------+------+---------+-------+-------+-------+-------+-------+-------+-------+-------+-------+--------+------+----+----+-------+
| 013 |        |      |         |         |         |       |       |         |         |         |         |         | X        |         |         |           |             | X    |         |       |       | X     |       |       |       |       |       |       | X      |      | X  |    |       |
+-----+--------+------+---------+---------+---------+-------+-------+---------+---------+---------+---------+---------+----------+---------+---------+-----------+-------------+------+---------+-------+-------+-------+-------+-------+-------+-------+-------+-------+--------+------+----+----+-------+
| 014 |        |      |         |         |         |       |       |         |         |         |         |         | X        |         |         |           |             | X    |         |       |       |       | X     |       |       |       |       |       | X      |      | X  |    |       |
+-----+--------+------+---------+---------+---------+-------+-------+---------+---------+---------+---------+---------+----------+---------+---------+-----------+-------------+------+---------+-------+-------+-------+-------+-------+-------+-------+-------+-------+--------+------+----+----+-------+
| 015 |        |      |         |         |         |       |       |         |         |         |         |         | X        |         |         |           |             | X    |         |       |       |       |       | X     |       |       |       |       | X      |      | X  |    |       |
+-----+--------+------+---------+---------+---------+-------+-------+---------+---------+---------+---------+---------+----------+---------+---------+-----------+-------------+------+---------+-------+-------+-------+-------+-------+-------+-------+-------+-------+--------+------+----+----+-------+
| 016 |        |      |         |         |         |       |       |         |         |         |         | X       |          |         |         |           |             |      | X       |       | X     |       |       |       |       |       |       |       | X      |      | X  |    |       |
+-----+--------+------+---------+---------+---------+-------+-------+---------+---------+---------+---------+---------+----------+---------+---------+-----------+-------------+------+---------+-------+-------+-------+-------+-------+-------+-------+-------+-------+--------+------+----+----+-------+
| 017 |        |      |         |         |         |       |       |         |         |         |         | X       |          |         |         |           |             |      | X       |       |       | X     |       |       |       |       |       |       | X      |      | X  |    |       |
+-----+--------+------+---------+---------+---------+-------+-------+---------+---------+---------+---------+---------+----------+---------+---------+-----------+-------------+------+---------+-------+-------+-------+-------+-------+-------+-------+-------+-------+--------+------+----+----+-------+
| 018 |        |      |         |         |         |       |       |         |         |         |         | X       |          |         |         |           |             |      | X       |       |       |       | X     |       |       |       |       |       | X      |      | X  |    |       |
+-----+--------+------+---------+---------+---------+-------+-------+---------+---------+---------+---------+---------+----------+---------+---------+-----------+-------------+------+---------+-------+-------+-------+-------+-------+-------+-------+-------+-------+--------+------+----+----+-------+
| 019 |        |      |         |         |         |       |       |         |         |         |         | X       |          |         |         |           |             |      | X       |       |       |       |       | X     |       |       |       |       | X      |      | X  |    |       |
+-----+--------+------+---------+---------+---------+-------+-------+---------+---------+---------+---------+---------+----------+---------+---------+-----------+-------------+------+---------+-------+-------+-------+-------+-------+-------+-------+-------+-------+--------+------+----+----+-------+
| 020 |        |      |         |         |         |       |       |         |         |         |         |         |          |         |         |           |             |      | X       |       |       |       |       |       |       |       |       |       | X      |      |    |    |       |
+-----+--------+------+---------+---------+---------+-------+-------+---------+---------+---------+---------+---------+----------+---------+---------+-----------+-------------+------+---------+-------+-------+-------+-------+-------+-------+-------+-------+-------+--------+------+----+----+-------+
| 021 |        |      |         | X       | X       |       | X     |         | X       |         |         |         |          |         |         |           |             |      | X       |       |       |       |       |       |       |       |       |       |        |      |    |    |       |
+-----+--------+------+---------+---------+---------+-------+-------+---------+---------+---------+---------+---------+----------+---------+---------+-----------+-------------+------+---------+-------+-------+-------+-------+-------+-------+-------+-------+-------+--------+------+----+----+-------+
| 022 |        |      |         | X       |         |       |       |         | X       |         |         | X       |          |         |         |           |             | X    |         |       |       |       |       |       |       |       |       |       | X      |      |    |    |       |
+-----+--------+------+---------+---------+---------+-------+-------+---------+---------+---------+---------+---------+----------+---------+---------+-----------+-------------+------+---------+-------+-------+-------+-------+-------+-------+-------+-------+-------+--------+------+----+----+-------+
| 024 |        | X    |         | X       |         |       | X     |         | X       |         |         |         |          |         |         |           |             | X    |         |       |       |       |       |       |       |       |       |       |        | X    |    |    |       |
+-----+--------+------+---------+---------+---------+-------+-------+---------+---------+---------+---------+---------+----------+---------+---------+-----------+-------------+------+---------+-------+-------+-------+-------+-------+-------+-------+-------+-------+--------+------+----+----+-------+
| 025 |        |      |         | X       | X       |       | X     |         | X       |         |         |         |          |         |         |           |             | X    |         |       |       |       |       |       |       |       |       |       |        |      |    | X  |       |
+-----+--------+------+---------+---------+---------+-------+-------+---------+---------+---------+---------+---------+----------+---------+---------+-----------+-------------+------+---------+-------+-------+-------+-------+-------+-------+-------+-------+-------+--------+------+----+----+-------+
| 026 |        |      |         |         |         |       |       |         |         |         |         | X       |          |         |         |           |             |      |         |       |       |       |       |       |       | X     |       |       |        |      |    |    |       |
+-----+--------+------+---------+---------+---------+-------+-------+---------+---------+---------+---------+---------+----------+---------+---------+-----------+-------------+------+---------+-------+-------+-------+-------+-------+-------+-------+-------+-------+--------+------+----+----+-------+
| 027 |        |      | X       |         |         |       |       |         |         |         | X       |         |          |         |         |           |             |      |         |       |       |       |       |       |       |       |       |       |        |      |    |    |       |
+-----+--------+------+---------+---------+---------+-------+-------+---------+---------+---------+---------+---------+----------+---------+---------+-----------+-------------+------+---------+-------+-------+-------+-------+-------+-------+-------+-------+-------+--------+------+----+----+-------+
| 028 |        |      |         |         |         |       |       |         |         |         |         |         |          |         |         |           |             | X    | X       |       |       |       |       |       |       |       | X     |       |        |      |    |    |       |
+-----+--------+------+---------+---------+---------+-------+-------+---------+---------+---------+---------+---------+----------+---------+---------+-----------+-------------+------+---------+-------+-------+-------+-------+-------+-------+-------+-------+-------+--------+------+----+----+-------+
| 030 |        |      |         |         |         |       |       |         |         |         |         | X       |          |         |         |           |             | X    | X       |       |       |       |       |       |       |       | X     |       |        |      |    |    |       |
+-----+--------+------+---------+---------+---------+-------+-------+---------+---------+---------+---------+---------+----------+---------+---------+-----------+-------------+------+---------+-------+-------+-------+-------+-------+-------+-------+-------+-------+--------+------+----+----+-------+
| 031 |        |      |         |         |         |       |       |         |         |         |         |         |          |         |         |           |             | X    |         |       |       |       |       |       |       |       |       | X     |        |      |    |    |       |
+-----+--------+------+---------+---------+---------+-------+-------+---------+---------+---------+---------+---------+----------+---------+---------+-----------+-------------+------+---------+-------+-------+-------+-------+-------+-------+-------+-------+-------+--------+------+----+----+-------+
| 032 |        |      |         |         |         |       |       |         |         |         |         |    X    |          |         |         |           |             |      |         |       |       |       |       |       |       |       |       |       |        |      | X  |    |       |
+-----+--------+------+---------+---------+---------+-------+-------+---------+---------+---------+---------+---------+----------+---------+---------+-----------+-------------+------+---------+-------+-------+-------+-------+-------+-------+-------+-------+-------+--------+------+----+----+-------+
| 033 |        |      |         |         |         |       |       |         |         |         |         | X       |          |         |         |           |             |      |         |       |       |       |       |       |       | X     |       |       |        |      |    |    |       |
+-----+--------+------+---------+---------+---------+-------+-------+---------+---------+---------+---------+---------+----------+---------+---------+-----------+-------------+------+---------+-------+-------+-------+-------+-------+-------+-------+-------+-------+--------+------+----+----+-------+
| 035 |        |  X   |         | X       | X       |       | X     |         | X       |         |         |         |          |         |         |           |             |      | X       |       |       |       |       |       |       |       |       |       |        |      |    |    |       |
+-----+--------+------+---------+---------+---------+-------+-------+---------+---------+---------+---------+---------+----------+---------+---------+-----------+-------------+------+---------+-------+-------+-------+-------+-------+-------+-------+-------+-------+--------+------+----+----+-------+
| 036 |        |      |         | X       |         |       |       |         |         |         |         |         |          |         |         | X         |             |      |         |       | X     |       |       |       |       |       |       |       |        |      |    |    |    X  |
+-----+--------+------+---------+---------+---------+-------+-------+---------+---------+---------+---------+---------+----------+---------+---------+-----------+-------------+------+---------+-------+-------+-------+-------+-------+-------+-------+-------+-------+--------+------+----+----+-------+
| 037 |        |      |         | X       |         |       |       |         |         |         |         |         |          |         | X       |           |             |      |         | X     | X     |       |       |       |       |       |       |       |        |      |    |    |    X  |
+-----+--------+------+---------+---------+---------+-------+-------+---------+---------+---------+---------+---------+----------+---------+---------+-----------+-------------+------+---------+-------+-------+-------+-------+-------+-------+-------+-------+-------+--------+------+----+----+-------+
| 039 |        |      |         | X       | X       |       | X     |         |         |         |         |         |          |         |         |           |             | X    |         |       |       |       |       |       |       |       |       |       |        |      | X  |    |       |
+-----+--------+------+---------+---------+---------+-------+-------+---------+---------+---------+---------+---------+----------+---------+---------+-----------+-------------+------+---------+-------+-------+-------+-------+-------+-------+-------+-------+-------+--------+------+----+----+-------+
| 042 |   X    |      |         | X       | X       |       | X     |         | X       |         |         |         |          |         |         |           |             |      | X       |       |       |       |       |       |       |       |       |       |        |      |    |    |   X   |
+-----+--------+------+---------+---------+---------+-------+-------+---------+---------+---------+---------+---------+----------+---------+---------+-----------+-------------+------+---------+-------+-------+-------+-------+-------+-------+-------+-------+-------+--------+------+----+----+-------+
| 047 |        |      |         |         |         |       |       |         |         |         |         |         |          | X       |         |           |             |      |         |       |       |       |       |       |       |       |       |       |        |      |    |    |       |
+-----+--------+------+---------+---------+---------+-------+-------+---------+---------+---------+---------+---------+----------+---------+---------+-----------+-------------+------+---------+-------+-------+-------+-------+-------+-------+-------+-------+-------+--------+------+----+----+-------+
| 048 |        |      |         | X       |         |       |       |         | X       |         |         | X       |          |         |         |           |             | X    |         |       |       |       |       |       |       |       |       |       | X      |      |    |    |       |
+-----+--------+------+---------+---------+---------+-------+-------+---------+---------+---------+---------+---------+----------+---------+---------+-----------+-------------+------+---------+-------+-------+-------+-------+-------+-------+-------+-------+-------+--------+------+----+----+-------+
| 050 |        |      |         |         |         |       |       |         |         |         | X       |         |          | X       |         |           |             |      |         |       |       |       |       |       |       |       |       |       |        |      |    |    |       |
+-----+--------+------+---------+---------+---------+-------+-------+---------+---------+---------+---------+---------+----------+---------+---------+-----------+-------------+------+---------+-------+-------+-------+-------+-------+-------+-------+-------+-------+--------+------+----+----+-------+

Definition of Terms:

+--------------+-------------------------------------------------------------------+
| Acroynm      | Definition                                                        |
+==============+===================================================================+
| FS           | Featureset                                                        |
+--------------+-------------------------------------------------------------------+
| UC           | TripleO Undercloud                                                |
+--------------+-------------------------------------------------------------------+
| OC           | TripleO Overcloud                                                 |
+--------------+-------------------------------------------------------------------+
| NI SN        | network isolation single network interface card                   |
+--------------+-------------------------------------------------------------------+
| NI MN        | network isolation multiple network interface card                 |
+--------------+-------------------------------------------------------------------+
| NI BOND      | network isolation bonded network interfaces                       |
+--------------+-------------------------------------------------------------------+
| ping         | deploy test heat stack, ping and ssh tests launched test instance |
+--------------+-------------------------------------------------------------------+
| idem         | idempotency test                                                  |
+--------------+-------------------------------------------------------------------+
| cont         | containerized                                                     |
+--------------+-------------------------------------------------------------------+
| cnf-dl       | config-download is enabled                                        |
+--------------+-------------------------------------------------------------------+
| upg          | major upgrade                                                     |
+--------------+-------------------------------------------------------------------+
| upd          | minor upgrade                                                     |
+--------------+-------------------------------------------------------------------+
| FF           | Fast Forward                                                      |
+--------------+-------------------------------------------------------------------+
| sc<number>   | scenario                                                          |
+--------------+-------------------------------------------------------------------+
| PM           |  pacemaker enabled, topology determines the number of controllers |
+--------------+-------------------------------------------------------------------+
| HC           | Heat Convergence is enabled                                       |
+--------------+-------------------------------------------------------------------+
| IPSec        | IPSec tunnels for the overcloud are enabled                       |
+--------------+-------------------------------------------------------------------+
| Int          | Internal traffic (undercloud)                                     |
+--------------+-------------------------------------------------------------------+
| Ext          | External traffic (overcloud)                                      |
+--------------+-------------------------------------------------------------------+

Note and Known limitation:

 - Featureset037, Overcloud Update:
    - this doesn't change the container image file.
